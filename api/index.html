<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://sasakaranovic.com/api/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>API documentation - OpenFan API</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "API documentation";
        var mkdocs_page_input_path = "api.md";
        var mkdocs_page_url = "/api/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> OpenFan API
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">API documentation</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#access-remotely-over-network">Access remotely over network</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#messaging">Messaging</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fan-status-apiv0fanstatus">Fan Status - /api/v0/fan/status</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#example-get-rpm-of-all-fans">Example: Get RPM of all fans</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fan-set-rpm-apiv0fanfanrpmvaluerpm">Fan Set RPM - /api/v0/fan/{fan}/rpm?value={rpm}</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#example-set-fan-1-to-1200-prm">Example: Set fan #1 to 1200 PRM:</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fan-set-pwm-apiv0fanfanpwmvaluerpm">Fan Set PWM - /api/v0/fan/{fan}/pwm?value={rpm}</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#example-set-fan-1-to-60-pmw">Example: Set fan #1 to 60% PMW:</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fan-profiles-list-apiv0profileslist">Fan Profiles List - /api/v0/profiles/list</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#example-retrieve-available-fan-profiles">Example: Retrieve available fan profiles</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fan-profile-apply-apiv0profilessetnameprofile_name">Fan Profile Apply - /api/v0/profiles/set?name={profile_name}</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#example-apply-a-fan-profile-named-1000rpm">Example: Apply a fan profile named 1000RPM</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#get-system-information-apiv0info">Get System Information - /api/v0/info</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#example-get-system-information">Example: Get system information</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="https://github.com/SasaKaranovic/OpenFanController">Source Code</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="https://shop.sasakaranovic.com/products/openfan-pc-fan-controller">Buy OpenFAN</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="https://sasakaranovic.com/projects/openfan-controller/">Project Page</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="https://sasakaranovic.com/">Open Fan by Karanovic Research</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">OpenFan API</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">API documentation</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="openfan-api-documentation">OpenFAN API Documentation</h1>
<p>OpenFAN provides an API that allows you to interact with it remotely or integrate OpenFAN into another system.</p>
<p>You can use this for example to monitor/log the fan RPM, or to apply different FAN profiles based on system temperature/load etc. You could also use it for detection of stalled/blocked fans or to coordinate multiple OpenFan instances.</p>
<h2 id="configuration">Configuration</h2>
<p>The API server runs on port <code>3000</code> and accepts HTTP GET/POST requests.<br />
In order to send requests and read responses, you will use the machine IP address. If the API server is running on the locally, you can access it via <code>localhost</code> or <code>127.0.0.1</code>.</p>
<p>Assuming you are running OpenFAN locally, the base API URL can be accessed at <code>http://localhost:3000/api/v0</code> and at the same time you would be able to access the GUI interface via your web-browser on <code>http://localhost:3000</code>.</p>
<p>The OpenAPI server will serve both the API and the GUI at the same time.</p>
<div class="admonition note annotate">
<p class="admonition-title">config.yaml</p>
<p>If port <code>3000</code> is already in use or you wish to use a different port, you can change it in the <code>config.yaml</code> file.</p>
</div>
<h2 id="access-remotely-over-network">Access remotely over network</h2>
<p>If you are accessing/controlling a remote OpenFAN, you would use the IP address of the remote machine on which OpenFAN is running. For example if you want to access OpenFAN API on a networked machine that has IP address <code>192.168.0.55</code> you would use <code>http://192.168.0.55:3000/api/v0</code> as the API base URL and <code>http://192.168.0.55:3000</code> to access the GUI interface.</p>
<div class="admonition danger annotate">
<p class="admonition-title">Security!</p>
<p>OpenFAN API does NOT use any encryption or authentication. So make sure that you limit access to the API via your firewall .</p>
</div>
<h2 id="messaging">Messaging</h2>
<p>All transactions begin with the client sending a <code>HTTP/GET</code> or <code>HTTP/POST</code> request to the OpenFAN API server.</p>
<p>All responses from the server are JSON formatted and <em>always</em> contain three keys: status, message and data. Although they can be empty/null if they should be ignored (ie. there is an error, status and message keys will be populated but data will be null).</p>
<p>Response always has the following structure:</p>
<pre><code class="language-json">{
    &quot;status&quot;: &quot;...&quot;,
    &quot;message&quot;: &quot;...&quot;,
    &quot;data&quot;: { }
}
</code></pre>
<hr />
<h2 id="fan-status-apiv0fanstatus">Fan Status - <code>/api/v0/fan/status</code></h2>
<p>Use this function to get fan status (RPM values) from the server.</p>
<h3 id="example-get-rpm-of-all-fans">Example: Get RPM of all fans</h3>
<blockquote>
<p><code>GET</code> - <code>http://localhost:3000/api/v0/fan/status</code></p>
</blockquote>
<p>Response format (JSON)</p>
<pre><code class="language-json">{
    &quot;status&quot;: &quot;ok&quot;,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {
        &quot;0&quot;: 1009,
        &quot;1&quot;: 0,
        &quot;2&quot;: 1007,
        &quot;3&quot;: 0,
        &quot;4&quot;: 1011,
        &quot;5&quot;: 0,
        &quot;6&quot;: 0,
        &quot;7&quot;: 1009,
        &quot;8&quot;: 0,
        &quot;9&quot;: 1007
    }
}
</code></pre>
<hr />
<h2 id="fan-set-rpm-apiv0fanfanrpmvaluerpm">Fan Set RPM - <code>/api/v0/fan/{fan}/rpm?value={rpm}</code></h2>
<p>Use this function to set fan number <code>{fan}</code> to RPM value of <code>{rpm}</code>.</p>
<div class="admonition note annotate">
<p class="admonition-title">Note</p>
<p>Fan index must be a value from <code>1-10</code></p>
<p>RPM value must be within <code>[500-9000]</code> range.</p>
</div>
<h3 id="example-set-fan-1-to-1200-prm">Example: Set fan #1 to 1200 PRM:</h3>
<blockquote>
<p><code>GET</code> - <code>http://localhost:3000/api/v0/fan/1/rpm?value=1200</code></p>
</blockquote>
<p>Response is a JSON object</p>
<pre><code class="language-json">{
    &quot;status&quot;: &quot;ok&quot;,
    &quot;message&quot;: &quot;Update queued. Fan:1 RPM:1200&quot;,
    &quot;data&quot;: null
}
</code></pre>
<hr />
<h2 id="fan-set-pwm-apiv0fanfanpwmvaluerpm">Fan Set PWM - <code>/api/v0/fan/{fan}/pwm?value={rpm}</code></h2>
<p>Use this function to set <strong>PWM</strong> of fan number <code>{fan}</code> to <code>{pwm}</code> percent.</p>
<div class="admonition note annotate">
<p class="admonition-title">Note</p>
<p>Fan index must be a value from <code>1-10</code></p>
<p>RPM value must be within <code>[0-100]</code> range. Where 0 means off (or lowest speed possible) and 100 means fully on.</p>
</div>
<h3 id="example-set-fan-1-to-60-pmw">Example: Set fan #1 to 60% PMW:</h3>
<blockquote>
<p><code>GET</code> - <code>http://localhost:3000/api/v0/fan/1/pwm?value=60</code></p>
</blockquote>
<p>Response is a JSON object</p>
<pre><code class="language-json">{
    &quot;status&quot;: &quot;ok&quot;,
    &quot;message&quot;: &quot;Update queued. Fan:1 PWM:60&quot;,
    &quot;data&quot;: null
}
</code></pre>
<hr />
<h2 id="fan-profiles-list-apiv0profileslist">Fan Profiles List - <code>/api/v0/profiles/list</code></h2>
<p>Use this function to retrieve a list of all the fan profiles that are available.</p>
<p>New fan profiles can be created through the GUI (recommened) or via API.</p>
<h3 id="example-retrieve-available-fan-profiles">Example: Retrieve available fan profiles</h3>
<blockquote>
<p><code>GET</code> - <code>http://localhost:3000/api/v0/profiles/list</code></p>
</blockquote>
<p>Response is a JSON object</p>
<pre><code class="language-json">{
    &quot;status&quot;: &quot;ok&quot;,
    &quot;message&quot;: &quot;There are 3 FAN profiles available.&quot;,
    &quot;data&quot;: [
        {
            &quot;type&quot;: &quot;rpm&quot;,
            &quot;values&quot;: [
                1000,
                1000,
                1000,
                1000,
                1000,
                1000,
                1000,
                1000,
                1000,
                1000
            ],
            &quot;name&quot;: &quot;1000 RPM&quot;
        },
        {
            &quot;type&quot;: &quot;PWM&quot;,
            &quot;values&quot;: [
                100,
                100,
                100,
                100,
                100,
                100,
                100,
                100,
                100,
                100
            ],
            &quot;name&quot;: &quot;MadMax&quot;
        },
        {
            &quot;type&quot;: &quot;RPM&quot;,
            &quot;values&quot;: [
                1200,
                1200,
                1200,
                1200,
                1200,
                1200,
                1200,
                1200,
                1200,
                1200
            ],
            &quot;name&quot;: &quot;1200RPM&quot;
        }
    ]
}
</code></pre>
<p>Above is an example response containing available fan profiles. The server has 3 fan profiles that have been previously defined.</p>
<p>Each profile has <code>name</code>, <code>type</code> and <code>values</code> keys.</p>
<p><code>name</code> key is the name that has been given to this profile and is used to uniquely identify it. There can not be two profiles with the same name. This also allows us to easily overwrite/update profiles by specifying the same name.</p>
<p><code>type</code> indicates if the values in the profile are to be treated as <code>RPM</code> values or <code>PWM</code>. Given that lowest <code>RPM</code> is 500RPM and highest PWM is 100%, we can easily distinguish between RPM/PWM profile so this key is more for quality of life and potentially catching typos and edge cases (ie. During profile creation setting RPM to 70 instead of 700).</p>
<p><code>values</code> is an array of exactly 10 elements each corresponding to fans 1-10. These values will be assigned to each fan and be used as RPM/PWM value depending on <code>type</code>.</p>
<div class="admonition note annotate">
<p class="admonition-title">How are profiles stored?</p>
<p>All fan profiles are stored as plain-text inside <code>config.yaml</code> file.<br />
If you directly add/remove/modify a profile inside <code>config.yaml</code> file, you will have to restart the server app in order for changes to take effect. You can also easily create/update/remove profiles via the provided GUI app.</p>
<p>By backing up your <code>config.yaml</code> you will also back up all of your fan profiles.</p>
</div>
<hr />
<h2 id="fan-profile-apply-apiv0profilessetnameprofile_name">Fan Profile Apply - <code>/api/v0/profiles/set?name={profile_name}</code></h2>
<p>Use this function to apply a <code>{profile_name}</code> fan profile. This profile has to be created first (either through GUI (recommended) or via API).</p>
<div class="admonition note annotate">
<p class="admonition-title">Profile names</p>
<p>It is recommended that you limit you profile names to 'standard' ASCII characters and properly encode any spaces, dashes and any other special characters.</p>
</div>
<h3 id="example-apply-a-fan-profile-named-1000rpm">Example: Apply a fan profile named <code>1000RPM</code></h3>
<blockquote>
<p><code>GET</code> - <code>http://localhost:3000/api/v0/profiles/set?name=?value=1000RPM</code></p>
</blockquote>
<p>Response is a JSON object</p>
<pre><code class="language-json">{
    &quot;status&quot;: &quot;ok&quot;,
    &quot;message&quot;: &quot;Profile `1000RPM` activated. Fan1=1000 RPM Fan2=1000 RPM Fan3=1000 RPM Fan4=1000 RPM Fan5=1000 RPM Fan6=1000 RPM Fan7=1000 RPM Fan8=1000 RPM Fan9=1000 RPM Fan10=1000 RPM.&quot;,
    &quot;data&quot;: null
}
</code></pre>
<hr />
<h2 id="get-system-information-apiv0info">Get System Information - <code>/api/v0/info</code></h2>
<p>Use this function to get information about the OpenFAN hardware, firmware and software version.</p>
<p>This function can be used to identify</p>
<ul>
<li>which hardware OpenFAN is running on</li>
<li>what is the hardware architecture</li>
<li>what is the firmware version currently running on the device</li>
<li>what is the protocol version used for communication</li>
</ul>
<p>It will also provide software information like release date and version.</p>
<h3 id="example-get-system-information">Example: Get system information</h3>
<blockquote>
<p><code>GET</code> - <code>http://localhost:3000/api/v0/info</code></p>
</blockquote>
<p>Reponse is a JSON object</p>
<pre><code class="language-json">{
    &quot;status&quot;: &quot;ok&quot;,
    &quot;message&quot;: &quot;System information&quot;,
    &quot;data&quot;: {
        &quot;hardware&quot;: &quot;HW_REV:03
                     MCU:PICO2040
                     USB:NATIVE
                     FAN_CHANNELS_TOTAL:10
                     FAN_CHANNELS_ARCH:5+5
                     FAN_CHANNELS_DRIVER:EMC2305&quot;,

        &quot;firmware&quot;: &quot;FW_REV:01
                     PROTOCOL_VERSION:01&quot;,

        &quot;software&quot;: &quot;Version: 0.1
                     Build:2023-09-29&quot;
    }
}
</code></pre>
<hr />
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href=".." class="btn btn-neutral float-left" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>This work © 2023 by Sasa Karanovic is licensed under GPL-3.0 license</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href=".." style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
